<!--miniprogram/pages/add/index.wxml-->
<form bindsubmit="formSubmit" report-submit="true">
  <view class='group'>
    <van-cell-group>
      <van-field value="{{title}}" bind:input="onTitleChange" placeholder="请输入标题" label="标题" required clearable />
      <van-field value="{{detail}}" bind:input="onDetailChange" label="详情" type="textarea" required placeholder="请输入详情(高度会自适应)" autosize />
    </van-cell-group>
  </view>
  <view class='group'>
    <van-cell-group>
      <!-- onChangeAddress -->
      <van-cell wx:if="{{address.length == 0}}" title="添加位置">
        <van-switch inactive-color="#f65d7233" active-color="#f65d72" bind:change="onChangeAddress" />
      </van-cell>
      <van-cell wx:if="{{address.length > 0}}" title="地址 :" value="{{address}}" />
      <!-- onChangeWeather -->
      <van-cell wx:if="{{weather.length == 0}}" title="添加天气">
        <van-switch inactive-color="#f65d7233" active-color="#f65d72" bind:change="onChangeWeather" />
      </van-cell>
      <van-cell wx:if="{{weather.length > 0}}" title="天气 :" value="{{weather}}" />
      <van-cell wx:if="{{time.length == 0}}" title="添加时间提醒">
        <van-switch inactive-color="#f65d7233" active-color="#f65d72" bind:change="onChangeTime" />
      </van-cell>
      <van-cell wx:if="{{time.length > 0}}" title="提醒时间 :" value="{{time}}" />
    </van-cell-group>
  </view>
  <button open-type="getUserInfo" form-type='submit' bind:getuserinfo='readUserInfo' type="primary">添加便签</button>
</form>
<van-popup wx:if="{{popupFix}}" show="{{ showDate }}" position="bottom" overlay="{{ true }}" bind:close="onClose">
  <van-datetime-picker type="datetime" bind:confirm="confirm" bind:cancel="cancel" value="{{ currentDate }}" min-date="{{ minDate }}" title="选择时间" />
</van-popup>
<van-toast id="van-toast" />